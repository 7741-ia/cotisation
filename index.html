<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>App de Cotisation </title>
  <h1><strong>best king dan</strong></h1>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
  <header>
    <img id="appIcon" src="assets/cagnotte.svg" alt="Icône cagnotte" width="64" height="64">
    <h1>App de Cotisation</h1>
    <div class="controls">
      <button id="themeToggle">Mode sombre</button>
      <a href="catalogue.html" class="btn-link">Catalogue / Aide</a>
    </div>
  </header>

  <!-- Zone d'authentification : inscription / connexion utilisateur -->
  <section id="loginArea" class="card">
    <h2>Se connecter / S'inscrire</h2>
    <div class="form-group">
      <input type="email" id="userEmail" placeholder="Email" aria-label="Email">
      <input type="password" id="userPass" placeholder="Mot de passe" aria-label="Mot de passe">
    </div>
    <div style="margin-top:8px">
      <button onclick="createUser()">S'inscrire</button>
      <button onclick="loginUser()">Se connecter</button>
      <button onclick="continueAsGuest()">Continuer en invité</button>
    </div>
    <div style="margin-top:8px">
      <a href="#" onclick="requestPasswordReset()">Mot de passe oublié ?</a>
    </div>
    <p class="hint">Après connexion, vous pourrez ajouter des membres et gérer uniquement vos propres entrées.</p>
  </section>

  <!-- Aire principale de l'application ; cachée jusqu'à connexion -->
  <section id="appArea" style="display:none">
    <div class="admin-controls card">
      <div class="form-group">
        <label>Mois de début de contribution :</label>
        <select id="startMonth">
          <option value="1">Janvier</option>
          <option value="2">Février</option>
          <option value="3">Mars</option>
          <option value="4">Avril</option>
          <option value="5">Mai</option>
          <option value="6">Juin</option>
          <option value="7">Juillet</option>
          <option value="8">Août</option>
          <option value="9">Septembre</option>
          <option value="10">Octobre</option>
          <option value="11">Novembre</option>
          <option value="12">Décembre</option>
        </select>
        <select id="startYear">
          <option value="2025">2025</option>
          <option value="2026">2026</option>
          <option value="2027">2027</option>
          <option value="2028">2028</option>
          <option value="2029">2029</option>
          <option value="2030">2030</option>
        </select>
      </div>

      <div class="search-filter">
        <input type="text" id="searchMembers" placeholder="Rechercher un membre..." aria-label="Rechercher un membre">
        <select id="sortMembers">
          <option value="name">Trier par nom</option>
          <option value="amount">Trier par montant</option>
          <option value="date">Trier par date d'ajout</option>
        </select>
      </div>
    </div>

    <div class="form-inline">
      <input type="text" id="nameInput" placeholder="Nom de la personne" aria-label="Nom de la personne">
      <input type="number" id="monthlyInput" placeholder="Cotisation mensuelle (ex: 10)" min="0" aria-label="Cotisation mensuelle">
      <button onclick="addMember()" class="btn-primary">Ajouter Membre</button>
    </div>

    <div class="stats-card card">
      <div class="stat-item">
        <span class="stat-label">Total des cotisations</span>
        <span class="stat-value" id="totalAmount">0 FC</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Nombre de membres</span>
        <span class="stat-value" id="memberCount">0</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Moyenne par membre</span>
        <span class="stat-value" id="averageAmount">0 FC</span>
      </div>
    </div>

    <div class="table-wrap">
      <table border="1" id="membersTable">
        <tr>
          <th>Nom</th>
          <th>Montant total</th>
          <th>Mensuelle</th>
          <th>Payé ce mois</th>
          <th>Restant</th>
          <th>Action</th>
        </tr>
      </table>
    </div>

    <div class="card">
      <button onclick="exportCsv()">Exporter CSV</button>
      <button onclick="triggerImport()">Importer CSV</button>
      <input type="file" id="importFile" accept="text/csv" style="display:none" onchange="handleImport(event)">
      <button onclick="logoutUser()">Se déconnecter</button>
    </div>
  </section>
</div>

<script src="script.js"></script>
</body>
</html>
